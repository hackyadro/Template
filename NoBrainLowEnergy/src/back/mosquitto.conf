# =================================================================
# General Configuration
# =================================================================

# Set the user Mosquitto runs as for security (optional, but recommended)
user mosquitto

# Allow persistence to store messages/subscriptions/sessions across restarts
persistence true
persistence_location /var/lib/mosquitto/

# Log settings
# log_dest file /mosquitto/log/mosquitto.log
log_type error
log_type warning
log_type notice
log_type information

# =================================================================
# Default listener
# =================================================================
listener 1883
protocol mqtt
allow_anonymous true

# =================================================================
# Secure Listener (TLS/SSL) - MQTTS on standard port 8883
# =================================================================

# The standard, encrypted MQTTS port
listener 8883

# Protocol: mqtt (default, but explicit is good)
# protocol mqtt

# Path to the Certificate Authority (CA) certificate file
cafile /mosquitto/certs/ca.crt

# Path to the server certificate file
certfile /mosquitto/certs/server.crt

# Path to the server private key file
keyfile /mosquitto/certs/server.key

# Require clients to authenticate with a username/password even over TLS (optional, but recommended)
# allow_anonymous true
# password_file /mosquitto/config/passwd

